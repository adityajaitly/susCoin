<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Dashboard - susCoin</title>
    <meta name="description" content="Your personalized professional dashboard for earning climate credits">
    
    <!-- Tailwind CSS -->
    <link href="/styles/output.css" rel="stylesheet">
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-sus-bg text-sus-text font-sans antialiased">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-40 bg-sus-card/80 backdrop-blur-md border-b border-sus-line">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/home" class="flex items-center">
                        <img src="/images/logo.png" alt="susCoin Logo" class="h-10 w-auto mr-2 logo">
                        <span class="text-2xl font-bold text-sus-primary">susCoin</span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sus-muted">Welcome, <span class="text-sus-primary font-medium" id="userName">Professional</span>! üíº</span>
                    <a href="/auth" class="btn-secondary text-sm">Sign Out</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 pb-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <!-- Welcome Section -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-sus-text mb-2">üíº Professional Dashboard</h1>
                <p class="text-sus-muted">Maximize your climate impact while advancing your career!</p>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="card text-center">
                    <div class="text-3xl font-bold text-sus-primary mb-2" id="totalCredits">0</div>
                    <div class="text-sus-muted">Total Credits</div>
                </div>
                <div class="card text-center">
                    <div class="text-3xl font-bold text-sus-secondary mb-2" id="co2Saved">0.0</div>
                    <div class="text-sus-muted">CO‚ÇÇ Saved (kg)</div>
                </div>
                <div class="card text-center">
                    <div class="text-3xl font-bold text-sus-accent mb-2" id="workplaceRank">#-</div>
                    <div class="text-sus-muted">Workplace Rank</div>
                </div>
                <div class="card text-center">
                    <div class="text-3xl font-bold text-sus-success mb-2" id="monthlyGoal">0%</div>
                    <div class="text-sus-muted">Monthly Goal</div>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column: Quick Actions & Progress -->
                <div class="space-y-6">
                    <!-- Quick Actions -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üöÄ Quick Actions</h3>
                        <div class="space-y-3">
                            <button class="w-full btn-primary text-left" onclick="trackActivity('commute')">
                                üöó Track Commute
                            </button>
                            <button class="w-full btn-secondary text-left" onclick="trackActivity('remote_work')">
                                üè† Track Remote Work
                            </button>
                            <button class="w-full btn-accent text-left" onclick="trackActivity('business_travel')">
                                ‚úàÔ∏è Track Business Travel
                            </button>
                            <button class="w-full btn-success text-left" onclick="openCalculator()">
                                üßÆ Calculate Trip Impact
                            </button>
                        </div>
                    </div>

                    <!-- Monthly Progress -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üìä Monthly Progress</h3>
                        <canvas id="monthlyChart" class="w-full h-48"></canvas>
                    </div>

                    <!-- Career Goals -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üéØ Career Goals</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Reduce commute emissions by 30%</span>
                                <span class="text-sus-success">25% ‚úÖ</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Earn 500 credits this quarter</span>
                                <span class="text-sus-warning">350/500 üîÑ</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Lead workplace sustainability initiative</span>
                                <span class="text-sus-primary">In Progress üìà</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Column: Main Content -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Professional-Specific Suggestions -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üí° Professional-Specific Suggestions</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 bg-sus-primary/10 rounded-lg border border-sus-primary/20">
                                <h4 class="font-medium text-sus-primary mb-2">üè¢ Workplace</h4>
                                <ul class="text-sm space-y-1 text-sus-muted">
                                    <li>‚Ä¢ Advocate for remote work policies</li>
                                    <li>‚Ä¢ Start a green commuting challenge</li>
                                    <li>‚Ä¢ Propose sustainability initiatives</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-sus-secondary/10 rounded-lg border border-sus-secondary/20">
                                <h4 class="font-medium text-sus-secondary mb-2">üíº Career Growth</h4>
                                <ul class="text-sm space-y-1 text-sus-muted">
                                    <li>‚Ä¢ Add sustainability to your skillset</li>
                                    <li>‚Ä¢ Network with green professionals</li>
                                    <li>‚Ä¢ Attend sustainability conferences</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-sus-accent/10 rounded-lg border border-sus-accent/20">
                                <h4 class="font-medium text-sus-accent mb-2">üè† Home Office</h4>
                                <ul class="text-sm space-y-1 text-sus-muted">
                                    <li>‚Ä¢ Use energy-efficient equipment</li>
                                    <li>‚Ä¢ Optimize your workspace lighting</li>
                                    <li>‚Ä¢ Implement paperless workflows</li>
                                </ul>
                            </div>
                            <div class="p-4 bg-sus-success/10 rounded-lg border border-sus-success/20">
                                <h4 class="font-medium text-sus-success mb-2">üöó Smart Commuting</h4>
                                <ul class="text-sm space-y-1 text-sus-muted">
                                    <li>‚Ä¢ Use electric vehicle charging</li>
                                    <li>‚Ä¢ Join carpool programs</li>
                                    <li>‚Ä¢ Consider bike-to-work days</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activities -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üìù Recent Activities</h3>
                        <div class="space-y-3" id="recentActivities">
                            <div class="flex items-center justify-between p-3 bg-sus-success/10 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üöó</span>
                                    <div>
                                        <div class="font-medium">Electric Vehicle Commute</div>
                                        <div class="text-sm text-sus-muted">Today, 8:30 AM</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-sus-success">+25 credits</div>
                                    <div class="text-sm text-sus-muted">3.2 kg CO‚ÇÇ saved</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-sus-primary/10 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üè†</span>
                                    <div>
                                        <div class="font-medium">Remote Work Day</div>
                                        <div class="text-sm text-sus-muted">Yesterday</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-sus-primary">+20 credits</div>
                                    <div class="text-sm text-sus-muted">2.5 kg CO‚ÇÇ saved</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Workplace Leaderboard -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üèÜ Workplace Leaderboard</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-sus-primary/10 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•á</span>
                                    <div>
                                        <div class="font-medium">Michael R.</div>
                                        <div class="text-sm text-sus-muted">Senior Developer</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-sus-primary">1,247 credits</div>
                                    <div class="text-sm text-sus-muted">Level 7</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-sus-secondary/10 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•à</span>
                                    <div>
                                        <div class="font-medium">Jennifer L.</div>
                                        <div class="text-sm text-sus-muted">Product Manager</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-sus-secondary">1,023 credits</div>
                                    <div class="text-sm text-sus-muted">Level 6</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-sus-accent/10 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•â</span>
                                    <div>
                                        <div class="font-medium">You</div>
                                        <div class="text-sm text-sus-muted">Current Rank</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-sus-accent">350 credits</div>
                                    <div class="text-sm text-sus-muted">Level 3</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Investment Opportunities -->
                    <div class="card">
                        <h3 class="font-semibold mb-4">üí∞ Investment Opportunities</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 bg-sus-primary/10 rounded-lg border border-sus-primary/20">
                                <h4 class="font-medium text-sus-primary mb-2">üè† Home Improvements</h4>
                                <p class="text-sm text-sus-muted mb-2">Use your credits for sustainable home upgrades</p>
                                <div class="text-xs text-sus-muted">
                                    <div>‚Ä¢ Solar panel installation: 2,000 credits</div>
                                    <div>‚Ä¢ Energy-efficient appliances: 500 credits</div>
                                    <div>‚Ä¢ Smart home systems: 300 credits</div>
                                </div>
                            </div>
                            <div class="p-4 bg-sus-secondary/10 rounded-lg border border-sus-secondary/20">
                                <h4 class="font-medium text-sus-secondary mb-2">üöó Transportation</h4>
                                <p class="text-sm text-sus-muted mb-2">Invest in green transportation options</p>
                                <div class="text-xs text-sus-muted">
                                    <div>‚Ä¢ Electric vehicle down payment: 5,000 credits</div>
                                    <div>‚Ä¢ E-bike purchase: 800 credits</div>
                                    <div>‚Ä¢ Public transit passes: 100 credits</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Activity Tracking Modal -->
    <div id="activityModal" class="fixed inset-0 bg-black/50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-sus-card rounded-lg p-6 max-w-md w-full">
                <h3 class="text-xl font-semibold mb-4">Track Activity</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-sus-muted mb-2">Activity Type</label>
                        <select id="activityType" class="w-full p-3 border border-sus-line rounded-lg bg-sus-card">
                            <option value="commute">Commute</option>
                            <option value="remote_work">Remote Work</option>
                            <option value="business_travel">Business Travel</option>
                            <option value="carpool">Carpool</option>
                            <option value="public_transport">Public Transport</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-sus-muted mb-2">Distance (km)</label>
                        <input type="number" id="activityDistance" step="0.1" min="0" class="w-full p-3 border border-sus-line rounded-lg bg-sus-card" placeholder="e.g., 15.0">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-sus-muted mb-2">Transport Mode</label>
                        <select id="transportMode" class="w-full p-3 border border-sus-line rounded-lg bg-sus-card">
                            <option value="electric_vehicle">Electric Vehicle</option>
                            <option value="hybrid_vehicle">Hybrid Vehicle</option>
                            <option value="public_transport">Public Transport</option>
                            <option value="walking">Walking</option>
                            <option value="cycling">Cycling</option>
                        </select>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="closeActivityModal()" class="flex-1 btn-secondary">Cancel</button>
                        <button onclick="submitActivity()" class="flex-1 btn-primary">Track</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Socket.IO
        const socket = io();
        
        // Mock data for professional dashboard
        const professionalData = {
            totalCredits: 350,
            co2Saved: 45.2,
            workplaceRank: 8,
            monthlyGoal: 70
        };

        // Update dashboard with user data
        function updateDashboard() {
            document.getElementById('totalCredits').textContent = professionalData.totalCredits;
            document.getElementById('co2Saved').textContent = professionalData.co2Saved.toFixed(1);
            document.getElementById('workplaceRank').textContent = `#${professionalData.workplaceRank}`;
            document.getElementById('monthlyGoal').textContent = `${professionalData.monthlyGoal}%`;
        }

        // Initialize monthly chart
        function initMonthlyChart() {
            const ctx = document.getElementById('monthlyChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Credits Earned',
                        data: [85, 92, 78, 95],
                        backgroundColor: '#3B82F6',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(156, 163, 175, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(156, 163, 175, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // Activity tracking functions
        function trackActivity(type) {
            document.getElementById('activityType').value = type;
            document.getElementById('activityModal').classList.remove('hidden');
        }

        function closeActivityModal() {
            document.getElementById('activityModal').classList.add('hidden');
        }

        function submitActivity() {
            const type = document.getElementById('activityType').value;
            const distance = parseFloat(document.getElementById('activityDistance').value);
            const transportMode = document.getElementById('transportMode').value;
            
            if (!distance || distance <= 0) {
                alert('Please enter a valid distance');
                return;
            }

            // Calculate credits based on activity type, distance, and transport mode
            let credits = 0;
            let co2Saved = 0;
            
            // Base credits for activity type
            switch(type) {
                case 'commute':
                    credits = Math.round(distance * 2);
                    break;
                case 'remote_work':
                    credits = Math.round(distance * 0); // No distance for remote work
                    credits = 20; // Fixed credits for remote work day
                    co2Saved = 2.5; // Fixed CO2 saved
                    break;
                case 'business_travel':
                    credits = Math.round(distance * 1.5);
                    break;
                case 'carpool':
                    credits = Math.round(distance * 1.2);
                    break;
                case 'public_transport':
                    credits = Math.round(distance * 1.8);
                    break;
            }

            // Apply transport mode multiplier
            if (type !== 'remote_work') {
                switch(transportMode) {
                    case 'electric_vehicle':
                        credits = Math.round(credits * 1.5);
                        co2Saved = distance * 0.08;
                        break;
                    case 'hybrid_vehicle':
                        credits = Math.round(credits * 1.2);
                        co2Saved = distance * 0.12;
                        break;
                    case 'public_transport':
                        credits = Math.round(credits * 1.3);
                        co2Saved = distance * 0.15;
                        break;
                    case 'walking':
                        credits = Math.round(credits * 2.0);
                        co2Saved = distance * 0.14;
                        break;
                    case 'cycling':
                        credits = Math.round(credits * 2.5);
                        co2Saved = distance * 0.18;
                        break;
                }
            }

            // Update dashboard
            professionalData.totalCredits += credits;
            professionalData.co2Saved += co2Saved;
            updateDashboard();

            // Add to recent activities
            addRecentActivity(type, transportMode, credits, co2Saved);

            // Close modal
            closeActivityModal();
            document.getElementById('activityDistance').value = '';

            // Show success message
            showToast(`‚úÖ Activity tracked! +${credits} credits earned`);
        }

        function addRecentActivity(type, transportMode, credits, co2Saved) {
            const activitiesContainer = document.getElementById('recentActivities');
            const activityDiv = document.createElement('div');
            
            const icons = {
                'commute': 'üöó',
                'remote_work': 'üè†',
                'business_travel': '‚úàÔ∏è',
                'carpool': 'üöó',
                'public_transport': 'üöå'
            };

            const names = {
                'commute': 'Commute',
                'remote_work': 'Remote Work Day',
                'business_travel': 'Business Travel',
                'carpool': 'Carpool',
                'public_transport': 'Public Transport'
            };

            activityDiv.className = 'flex items-center justify-between p-3 bg-sus-success/10 rounded-lg';
            activityDiv.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="text-2xl">${icons[type]}</span>
                    <div>
                        <div class="font-medium">${names[type]}</div>
                        <div class="text-sm text-sus-muted">Just now</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-semibold text-sus-success">+${credits} credits</div>
                    <div class="text-sm text-sus-muted">${co2Saved.toFixed(1)} kg CO‚ÇÇ saved</div>
                </div>
            `;

            activitiesContainer.insertBefore(activityDiv, activitiesContainer.firstChild);
        }

        function openCalculator() {
            window.location.href = '/calculator';
        }

        function showToast(message) {
            // Simple toast implementation
            const toast = document.createElement('div');
            toast.className = 'fixed top-20 right-4 bg-sus-success text-white px-6 py-4 rounded-lg shadow-lg z-50';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 3000);
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
            initMonthlyChart();
            
            // Track page view
            socket.emit('analytics', { event: 'page_view', data: { page: 'professional_dashboard' } });
        });
    </script>
</body>
</html>
